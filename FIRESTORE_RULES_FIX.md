# ๐ง ุฅุตูุงุญ ูุดููุฉ ุตูุงุญูุงุช Firestore

## โ ุงููุดููุฉ:
```
FirebaseError: Missing or insufficient permissions.
```

ูุฐุง ุงูุฎุทุฃ ูุนูู ุฃู ููุงุนุฏ Firestore ูุง ุชุณูุญ ุจุงููุฑุงุกุฉ ุฃู ุงููุชุงุจุฉ.

---

## โ ุงูุญู:

### ุงูุฎุทูุฉ 1๏ธโฃ: ุงุฐูุจ ุฅูู Firebase Console

1. ุงูุชุญ [Firebase Console](https://console.firebase.google.com/)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **Firestore Database**
4. ุงุถุบุท ุนูู ุชุจููุจ **Rules** (ุงูููุงุนุฏ)

---

### ุงูุฎุทูุฉ 2๏ธโฃ: ุงุณุชุจุฏู ุงูููุงุนุฏ ุจูุฐู ุงูููุงุนุฏ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ููุงุนุฏ ุงููุดุงุฑูุน ุงูุฑุฆูุณูุฉ
    match /projects/{projectId} {
      // ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ููุฌููุน
      allow read: if true;
      
      // ุงูุณูุงุญ ุจุงููุชุงุจุฉ ููุท ูููุณุชุฎุฏููู ุงููุณุฌููู
      allow create, update, delete: if request.auth != null;
    }
    
    // ููุงุนุฏ ุงููุดุงุฑูุน ุงููุญููุธุฉ
    match /savedProjects/{docId} {
      // ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูููุณุชุฎุฏู ุตุงุญุจ ุงููุดุฑูุน ููุท
      allow read, write: if request.auth != null && 
        request.auth.uid == resource.data.userId;
      
      // ุงูุณูุงุญ ุจุงูุฅูุดุงุก ูููุณุชุฎุฏููู ุงููุณุฌููู
      allow create: if request.auth != null;
    }
    
    // ููุงุนุฏ ุนุงูุฉ ูุฃู ูุฌููุนุฉ ุฃุฎุฑู (ุงุฎุชูุงุฑู)
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

---

### ุงูุฎุทูุฉ 3๏ธโฃ: ุงูุดุฑ ุงูููุงุนุฏ

1. ุจุนุฏ ูุตู ุงูููุงุนุฏุ ุงุถุบุท ุนูู **Publish** (ูุดุฑ)
2. ุงูุชุธุฑ ุจุถุน ุซูุงูู ุญุชู ูุชู ุชุทุจูู ุงูููุงุนุฏ

---

## ๐ ุดุฑุญ ุงูููุงุนุฏ:

### ูููุดุงุฑูุน (`projects`):
- โ **ุงููุฑุงุกุฉ**: ูุณููุญุฉ ููุฌููุน (ุญุชู ุจุฏูู ุชุณุฌูู ุฏุฎูู)
- โ **ุงููุชุงุจุฉ**: ููุท ูููุณุชุฎุฏููู ุงููุณุฌููู

### ูููุดุงุฑูุน ุงููุญููุธุฉ (`savedProjects`):
- โ **ุงููุฑุงุกุฉ/ุงููุชุงุจุฉ**: ููุท ูุตุงุญุจ ุงููุดุฑูุน
- โ **ุงูุฅูุดุงุก**: ูููุณุชุฎุฏููู ุงููุณุฌููู

---

## ๐ ููุชุทููุฑ ููุท (ุบูุฑ ุขูู):

ุฅุฐุง ููุช ูู ูุฑุญูุฉ ุงูุชุทููุฑ ูุชุฑูุฏ ุงูุณูุงุญ ุจูู ุดูุก ูุคูุชุงู:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
```

โ๏ธ **ุชุญุฐูุฑ**: ูุฐู ุงูููุงุนุฏ ุบูุฑ ุขููุฉ! ุงุณุชุฎุฏููุง ููุท ููุชุทููุฑ ูููุชุฑุฉ ูุญุฏูุฏุฉ.

---

## โ ุจุนุฏ ุชุทุจูู ุงูููุงุนุฏ:

1. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ
2. ุญุงูู ุฅุถุงูุฉ ูุดุฑูุน ูุฑุฉ ุฃุฎุฑู
3. ูุฌุจ ุฃู ูุนูู ุจุฏูู ูุดุงูู!

---

## ๐ ุงูุชุญูู ูู ุงูููุงุนุฏ:

ูู Firebase Consoleุ ููููู ุงุฎุชุจุงุฑ ุงูููุงุนุฏ:
1. ุงุฐูุจ ุฅูู ุชุจููุจ **Rules**
2. ุงุถุบุท ุนูู **Rules Playground**
3. ุงุฎุชุจุฑ ุงูุนูููุงุช ุงููุฎุชููุฉ

---

## ๐ ููุงุญุธุงุช:

- ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ูุจู ูุญุงููุฉ ุฅุถุงูุฉ ูุดุฑูุน
- ุงูููุงุนุฏ ุชุญุชุงุฌ ุจุถุน ุซูุงูู ููุชุทุจูู ุจุนุฏ ุงููุดุฑ
- ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู ุจุงููุนู

---

## ๐ฏ ุงูููุงุนุฏ ุงูููุตู ุจูุง ููุฅูุชุงุฌ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ุฏุงูุฉ ูุณุงุนุฏุฉ ููุชุญูู ูู ุงููุณุคูู
    function isAdmin() {
      return request.auth != null && 
        request.auth.token.email in [
          'mahmoud@example.com',
          'admin@tolzy.com'
        ];
    }
    
    // ุงููุดุงุฑูุน - ูุฑุงุกุฉ ููุฌููุนุ ูุชุงุจุฉ ูููุณุคูููู ููุท
    match /projects/{projectId} {
      allow read: if true;
      allow create, update, delete: if isAdmin();
    }
    
    // ุงููุดุงุฑูุน ุงููุญููุธุฉ - ูููุณุชุฎุฏููู ุงููุณุฌููู ููุท
    match /savedProjects/{docId} {
      allow read, write: if request.auth != null && 
        request.auth.uid == resource.data.userId;
      allow create: if request.auth != null;
    }
  }
}
```

ูุฐู ุงูููุงุนุฏ ุฃูุซุฑ ุฃูุงูุงู ูุฃููุง:
- โ ุชุณูุญ ููุท ูููุณุคูููู ุจุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงููุดุงุฑูุน
- โ ุชุณูุญ ูููุณุชุฎุฏููู ุจุญูุธ ูุดุงุฑูุนูู ููุท
- โ ุชุณูุญ ููุฌููุน ุจูุฑุงุกุฉ ุงููุดุงุฑูุน

---

## ๐ง ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

1. ุชุฃูุฏ ูู ุฃู Firebase ููุนูู ูู ุงููุดุฑูุน
2. ุชุญูู ูู ููู `.env` ูุฃู ุฌููุน ุงููุชุบูุฑุงุช ุตุญูุญุฉ
3. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ูุจู ูุญุงููุฉ ุฅุถุงูุฉ ูุดุฑูุน
4. ุงูุชุญ Console ูู ุงููุชุตูุญ ูุชุญูู ูู ุงูุฃุฎุทุงุก
5. ุชุฃูุฏ ูู ุฃู Firestore Database ููุนูู (ูููุณ Realtime Database)

---

**ุจุนุฏ ุชุทุจูู ูุฐู ุงูููุงุนุฏุ ูุฌุจ ุฃู ุชุนูู ุฅุถุงูุฉ ุงููุดุงุฑูุน ุจุฏูู ูุดุงูู! ๐**
